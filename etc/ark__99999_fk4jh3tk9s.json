{"metadata":{"title":"Tammemagi, 6 year Lung Cancer Risk Prediction Model for Screening","arkId":"ark:/99999/fk4jh3tk9s","version":"v0.1.0","owner":"University of Michigan Cancer Center","description":"For adults ages 50 and over, this is a validated lung cancer risk prediction model that can be used to guide decisions about lung cancer screening. This model was created within a collection of lung cancer models including Spitz Model, Etzel Model, Park Model, Marcus Model, Hoggart Model, Cassidy Model, and Bach Model.","contributors":"W Shi, R Fischer, T Caverly","keywords":"lung cancer, cancer-advisor","published":true,"lastModified":1509989553819,"createdOn":1479331877363,"objectType":null,"citations":[{"citation_id":"eeb6e4f6-0963-48cb-95ba-697a11996952","citation_title":"Selection Criteria for Lung-Cancer Screening","citation_at":"http://www.nejm.org/doi/pdf/10.1056/NEJMoa1211776"},{"citation_id":"d8910931-3f73-4c24-be85-496b52951946","citation_title":"Selection Criteria for Lung-Cancer Screening","citation_at":"http://www.nejm.org/doi/pdf/10.1056/NEJMoa1211776"}],"license":{"licenseName":"","licenseLink":""}},"inputMessage":"<rdf:RDF xmlns:ot=\"http://uofm.org/objectteller/#\"\n         xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\">\n    <rdf:Description rdf:about=\"http://uofm.org/objectteller/inputMessage\">\n        <ot:noofparams>10</ot:noofparams>\n        <ot:params>\n            <rdf:Seq>\n                <rdf:li>age</rdf:li>\n                <rdf:li>edLevel</rdf:li>\n                <rdf:li>bmi</rdf:li>\n                <rdf:li>hxNonLungCancerDz</rdf:li>\n                <rdf:li>hxLungCancer</rdf:li>\n                <rdf:li>hxLungCancerFam</rdf:li>\n                <rdf:li>ethnicity</rdf:li>\n                <rdf:li>yrsQuit</rdf:li>\n                <rdf:li>cigsPerDay</rdf:li>\n                <rdf:li>yrsSmoker</rdf:li>\n            </rdf:Seq>\n        </ot:params>\n    </rdf:Description>\n    <rdf:Description rdf:about=\"http://uofm.org/objectteller/age/\">\n        <ot:datatype>FLOAT</ot:datatype>\n        <ot:min>0</ot:min>\n    </rdf:Description>\n    <rdf:Description rdf:about=\"http://uofm.org/objectteller/edLevel/\">\n        <ot:datatype>INT</ot:datatype>\n        <ot:min>1</ot:min>\n        <ot:max>6</ot:max>\n    </rdf:Description>\n    <rdf:Description rdf:about=\"http://uofm.org/objectteller/bmi/\">\n        <ot:datatype>FLOAT</ot:datatype>\n        <ot:min>0</ot:min>\n    </rdf:Description>\n    <rdf:Description rdf:about=\"http://uofm.org/objectteller/hxNonLungCancerDz/\">\n        <ot:datatype>INT</ot:datatype>\n        <ot:min>0</ot:min>\n        <ot:max>1</ot:max>\n    </rdf:Description>\n    <rdf:Description rdf:about=\"http://uofm.org/objectteller/hxLungCancer/\">\n        <ot:datatype>INT</ot:datatype>\n        <ot:min>0</ot:min>\n        <ot:max>1</ot:max>\n    </rdf:Description>\n    <rdf:Description rdf:about=\"http://uofm.org/objectteller/hxLungCancerFam/\">\n        <ot:datatype>INT</ot:datatype>\n        <ot:min>0</ot:min>\n        <ot:max>1</ot:max>\n    </rdf:Description>\n    <rdf:Description rdf:about=\"http://uofm.org/objectteller/ethnicity/\">\n        <ot:datatype>INT</ot:datatype>\n        <ot:min>1</ot:min>\n        <ot:max>6</ot:max>\n    </rdf:Description>\n    <rdf:Description rdf:about=\"http://uofm.org/objectteller/yrsQuit/\">\n        <ot:datatype>INT</ot:datatype>\n        <ot:min>0</ot:min>\n    </rdf:Description>\n    <rdf:Description rdf:about=\"http://uofm.org/objectteller/cigsPerDay/\">\n        <ot:datatype>INT</ot:datatype>\n        <ot:min>0</ot:min>\n    </rdf:Description>\n    <rdf:Description rdf:about=\"http://uofm.org/objectteller/yrsSmoker/\">\n        <ot:datatype>INT</ot:datatype>\n        <ot:min>0</ot:min>\n    </rdf:Description>\n</rdf:RDF>\n","outputMessage":"<rdf:RDF xmlns:ot=\"http://uofm.org/objectteller/\" xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\">\n\n<rdf:Description rdf:about=\"http://uofm.org/objectteller/outputMessage\">\n    <ot:returntype>FLOAT</ot:returntype>\n</rdf:Description>\n</rdf:RDF>\n","payload":{"content":"from math import exp\nimport math\n\n# PLCOm2012 model (Tammemagi,NEJM,2013)\n# Author          Kevin ten Haaf\n# Organization    Erasmus Medical Center Rotterdam\n#Last adjusted: June 19 2014\ndef getSixyearprobability(info):\n\n    #currentage,education,bmi,copd,personalhistory,familyhistory,race,currentsmokingstatus,averageCPD,currentsmokingduration,currentyearsquit)\n    currentage = int(info['age'])\n    education = info['edLevel']\n    bmi = float(info['bmi'])\n    copd = int(info['hxNonLungCancerDz'])\n    personalhistory = int(info['hxLungCancer'])\n    familyhistory = int(info['hxLungCancerFam'])\n    race = int(info['ethnicity'])\n    currentsmokingstatus = 0 if info['yrsQuit'] else 1\n    averageCPD = int(info['cigsPerDay'])\n    currentsmokingduration = int(info['yrsSmoker'])\n    currentyearsquit = int(info['yrsQuit'])\n\n    #coeffs: age, education, bmi, copd, personal history, family history, smoking status, cpd, smoking duration, years since cessation\n    Coeffs=[-1, 0.0778868,-0.0812744,-0.0274194,0.3553063,0.4589971,0.587185,0.2597431,-1.822606,0.0317321,-0.0308572]\n    Racecoeffs=[-1, 0,0.3944778,-0.7434744,-0.466585,0,1.027152]\n\n\n    #First the center values for the variables are defined\n    agecentervalue = 62.0\n    educationcentervalue = 4.0\n    bmicentervalue = 27.0\n    CPDcentervalue =0.4021541613\n    Smokingdurationcentervalue = 27.0\n    Smokingcessationcentervalue = 10.0\n\n    #Then each model parameter's contribution is calculated\n\n    Modelconstant=-4.532506\n\n    Agecontribution = (currentage-agecentervalue)*Coeffs[1]\n    #print 'Agecontribution= %s' % Agecontribution\n\n    Educationcontribution = (education-educationcentervalue)*Coeffs[2]\n    #print 'Educationcontribution= %s' % Educationcontribution\n\n    Bmicontribution = (bmi-bmicentervalue)*Coeffs[3]\n    #print 'Bmicontribution= %s' % Bmicontribution\n\n    Copdcontribution = copd*Coeffs[4]\n    #print 'Copdcontribution= %s' % Copdcontribution\n\n    Personalhistorycontribution = personalhistory*Coeffs[5]\n    #print 'Personalhistorycontribution= %s' % Personalhistorycontribution\n\n    Familyhistorycontribution= familyhistory*Coeffs[6]\n    #print 'Familyhistorycontribution= %s' % Familyhistorycontribution\n\n    Smokingstatuscontribution= currentsmokingstatus*Coeffs[7]\n    #print 'Smokingstatuscontribution= %s' % Smokingstatuscontribution\n\n    if averageCPD:\n        CPDcontribution = ( math.pow((averageCPD / 10.0), -1 )-CPDcentervalue)*Coeffs[8]\n    else:\n        CPDcontribution = (0-CPDcentervalue)*Coeffs[8]\n    #print 'CPDcontribution= %s %s %s %s ' % ( CPDcontribution, averageCPD, CPDcentervalue, Coeffs[8])\n\n    Smokingdurationcontribution = (currentsmokingduration-Smokingdurationcentervalue )*Coeffs[9]\n    #print 'Smokingdurationcontribution= %s' % Smokingdurationcontribution\n\n    Smokingcessationcontribution = (currentyearsquit-Smokingcessationcentervalue)*Coeffs[10]\n    #print 'Smokingcessationcontribution= %s' % Smokingcessationcontribution\n\n    Racecontribution = Racecoeffs[race]\n    #print 'Racecontribution= %s' % Racecontribution\n\n    #The individual contributions are summed and the 6-year probability is returned\n    Sumvalues = Modelconstant+Agecontribution+Educationcontribution+Bmicontribution+Copdcontribution+Personalhistorycontribution+Familyhistorycontribution+Smokingstatuscontribution+CPDcontribution+Smokingdurationcontribution+Smokingcessationcontribution+Racecontribution\n    #print 'Sumvalues= %s' % Sumvalues\n\n    Sixyearprobabilitypercentage = 100 * exp(Sumvalues)/(1+exp(Sumvalues))\n\n    return float(Sixyearprobabilitypercentage)","functionName":"getSixyearprobability","engineType":"Python"},"logData":"ProvenanceLogData: \n\t wasAttributedTo: 'null',\n\t wasGeneratedBy: 'null',\n\t wasAssociatedWith: 'Lib-Admin Lib-Admin',\n\t used: 'null',\n\t startedAtTime: Wed Nov 16 16:31:17 EST 2016,\n\t endedAtTime: Wed Nov 16 16:31:17 EST 2016","uri":"ark:/99999/fk4jh3tk9s"}